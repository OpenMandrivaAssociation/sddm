From 5ab43a6418ec68fe7ba7690a7c9cb3c1552f62dd Mon Sep 17 00:00:00 2001
From: Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
Date: Fri, 6 Feb 2015 13:00:36 +0100
Subject: [PATCH 12/24] Fix session startup with zsh

As suggested in #352.
---
 data/scripts/Xsession | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/data/scripts/Xsession b/data/scripts/Xsession
index a86349e..5754447 100755
--- a/data/scripts/Xsession
+++ b/data/scripts/Xsession
@@ -20,9 +20,8 @@ case $SHELL in
       . $HOME/.profile
     fi
     ;;
-  */zsh)
+*/zsh)
     [ -z "$ZSH_NAME" ] && exec $SHELL $0 "$@"
-    emulate -R sh
     [ -d /etc/zsh ] && zdir=/etc/zsh || zdir=/etc
     zhome=${ZDOTDIR:-$HOME}
     # zshenv is always sourced automatically.
@@ -30,6 +29,7 @@ case $SHELL in
     [ -f $zhome/.zprofile ] && . $zhome/.zprofile
     [ -f $zdir/zlogin ] && . $zdir/zlogin
     [ -f $zhome/.zlogin ] && . $zhome/.zlogin
+    emulate -R sh
     ;;
   */csh|*/tcsh)
     # [t]cshrc is always sourced automatically.
-- 
1.9.0

